(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/views/t-pay-way/t-pay-way"],{"0d8e":function(t,e,n){"use strict";n.r(e);var i=n("d4133"),u=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=u.a},"11e2":function(t,e,n){"use strict";n.r(e);var i=n("f505"),u=n("0d8e");for(var o in u)"default"!==o&&function(t){n.d(e,t,(function(){return u[t]}))}(o);n("a7ba");var r,s=n("f0c5"),a=Object(s["a"])(u["default"],i["b"],i["c"],!1,null,"16e113dd",null,!1,i["a"],r);e["default"]=a.exports},"296c":function(t,e,n){},a7ba:function(t,e,n){"use strict";var i=n("296c"),u=n.n(i);u.a},d4133:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"tPayWay",emits:["close"],props:{page:{type:Number,default:1},orderForm:{type:Object,default:{}},mode:{type:String,default:""}},data:function(){return{show:!1,visible:!1,result:null,orderNum:"",initial:!0,success:!0,buttons:[{text:"暂时放弃",color:"#999"},{text:"再想想",color:"#eb0909"}]}},computed:{cart:function(){return this.$store.state.cart}},methods:{close:function(){this.success||(this.visible=!0),this.show=!1},buttonTap:function(t){this.visible=!1,0===t.index?(this.initial=!0,this.$emit("close",{})):this.show=!0},requestPayment:function(t,e){var n=this,i="",u=[];e.goodsList.forEach((function(){u.push({count:0})})),e.reviewState=u,wx.requestPayment({appid:t.appid,nonceStr:t.nonceStr,package:t.package,timeStamp:t.timeStamp,signType:t.signType,paySign:t.paySign,success:function(){i="/updateOrder/"+n.orderNum+"/payment",e.status="待评价",n.tui.request(i,"PUT",{status:"待评价"}).then((function(){n.success=!0,n.close();var t=e.goodsList;t.forEach((function(t){n.tui.request("/updateGoodsStock","PUT",{id:t.id,buyNum:t.buyNum})})),wx.redirectTo({url:"/pages/order/success/success"})}))},fail:function(e){n.initial=!1,i="/updateOrder/"+n.orderNum+"/paymentInfo",n.tui.request(i,"PUT",{paymentInfo:t}).then((function(){}))}})},btnPay:function(){var e=this;this.success=!1;var n=t.getStorageSync("pid"),i=this.$store.state.appid;if("cart"===this.mode){this.orderForm.goodsList.forEach((function(t){var n=e.cart.findIndex((function(e){return t.id===e.id}));e.cart.splice(n,1)}));var u="/updateCustomer/"+n+"/updateCart";this.tui.request(u,"PUT",{cart:this.cart}).then((function(t){console.log("res",t)}))}var o="/pay_miniprog/"+i+"/"+n;this.initial?(this.orderForm.status="待支付",this.tui.request(o,"POST",this.orderForm).then((function(t){"0"===t.code?(e.result=t.result,e.orderNum=t.orderNum,e.requestPayment(e.result,e.orderForm)):e.tui.toast("下单失败，请稍后再试")}))):this.requestPayment(this.result,this.orderForm)}}};e.default=n}).call(this,n("543d")["default"])},f505:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={tuiDialog:function(){return n.e("components/thorui/tui-dialog/tui-dialog").then(n.bind(null,"dbcd"))},tuiBottomPopup:function(){return n.e("components/thorui/tui-bottom-popup/tui-bottom-popup").then(n.bind(null,"dd5b"))},tuiListCell:function(){return n.e("components/thorui/tui-list-cell/tui-list-cell").then(n.bind(null,"057e"))},tuiButton:function(){return n.e("components/thorui/tui-button/tui-button").then(n.bind(null,"009d"))}},u=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.visible=!1})},o=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/views/t-pay-way/t-pay-way-create-component',
    {
        'components/views/t-pay-way/t-pay-way-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("11e2"))
        })
    },
    [['components/views/t-pay-way/t-pay-way-create-component']]
]);
