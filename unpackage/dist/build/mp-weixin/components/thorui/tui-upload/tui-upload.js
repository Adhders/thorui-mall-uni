(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/thorui/tui-upload/tui-upload"],{"673f":function(t,e,n){"use strict";n.r(e);var i=n("9ec7"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"684b":function(t,e,n){"use strict";var i=n("fe19"),r=n.n(i);r.a},"9ec7":function(t,e,n){"use strict";(function(t){function n(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function i(t){return s(t)||o(t)||a(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function s(t){if(Array.isArray(t))return u(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c={name:"tuiUpload",emits:["remove","complete"],props:{width:{type:[Number,String],default:220},height:{type:[Number,String],default:220},value:{type:Array,default:function(){return[]}},forbidDel:{type:Boolean,default:!1},forbidAdd:{type:Boolean,default:!1},serverUrl:{type:String,default:""},limit:{type:Number,default:9},sizeType:{type:Array,default:function(){return["original","compressed"]}},sourceType:{type:Array,default:function(){return["album","camera"]}},imageFormat:{type:Array,default:function(){return[]}},size:{type:Number,default:4},fileKeyName:{type:String,default:"file"},header:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}},params:{type:[Number,String],default:0}},data:function(){return{imageList:[],statusArr:[],keyList:[]}},created:function(){this.initImages()},watch:{value:function(t){t&&this.initImages()}},computed:{isShowAdd:function(){var t=!0;return(this.forbidAdd||this.limit&&this.imageList.length>=this.limit)&&(t=!1),t}},methods:{initImages:function(){this.statusArr=[],this.imageList=i(this.value);var t,e=n(this.imageList);try{for(e.s();!(t=e.n()).done;){t.value;this.statusArr.push("1")}}catch(r){e.e(r)}finally{e.f()}},reUpLoad:function(t){var e=this;this.$set(this.statusArr,t,"2"),this.change(),this.uploadImage(t,this.imageList[t]).then((function(){e.change()})).catch((function(){e.change()}))},change:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=~this.statusArr.indexOf("2")?2:1;2!=e&&~this.statusArr.indexOf("3")&&(e=3),this.$emit("complete",{status:e,imgArr:this.imageList,params:this.params,keyList:this.keyList,manual:t})},toast:function(e){e&&t.showToast({title:e,icon:"none"})},chooseImage:function(){var e=this;t.chooseImage({count:e.limit-e.imageList.length,sizeType:e.sizeType,sourceType:e.sourceType,success:function(t){for(var n=[],i=0;i<t.tempFiles.length;i++){var r=e.imageList.length;if(r>=e.limit){e.toast("最多可上传".concat(e.limit,"张图片"));break}var a=t.tempFiles[i].path;if(e.imageFormat.length>0){var o="";if(o=a.split(".")[a.split(".").length-1],-1==e.imageFormat.indexOf(o)){var s="只能上传 ".concat(e.imageFormat.join(",")," 格式图片！");e.toast(s);continue}}var u=t.tempFiles[i].size;if(1024*e.size*1024<u){var c="单张图片大小不能超过：".concat(e.size,"MB");e.toast(c)}else n.push(a),e.imageList.push(a),e.statusArr.push("2")}e.change();for(var f=e.imageList.length-n.length,l=0;l<n.length;l++){var h=f+l;e.serverUrl?e.uploadImage(h,n[l]).then((function(){e.change()})).catch((function(){e.change()})):(e.$set(e.statusArr,h,"1"),e.change())}}})},uploadImage:function(e,n,i){var r=this,a=this;return new Promise((function(o,s){t.uploadFile({url:r.serverUrl||i,name:r.fileKeyName,header:r.header,formData:r.formData,filePath:n,success:function(t){200===t.statusCode?(a.keyList[e]=JSON.parse(t.data).key,a.$set(a.statusArr,e,"1"),o(e)):(a.$set(a.statusArr,e,"3"),s(e))},fail:function(t){a.$set(a.statusArr,e,"3"),s(e)}})}))},delImage:function(t){this.imageList.splice(t,1),this.statusArr.splice(t,1),this.keyList.splice(t,1),this.$emit("remove",{index:t,params:this.params}),this.change()},previewImage:function(e){this.imageList.length&&t.previewImage({current:this.imageList[e],loop:!0,urls:this.imageList})},uploadAllImage:function(t){var e=this;if(t)for(var n=i(this.imageList),r=n.length,a=function(i){if(n[i].startsWith("https"))return"continue";e.$set(e.statusArr,i,"2"),e.uploadImage(i,n[i],t).then((function(){i===r-1&&e.change(!0)})).catch((function(){i===r-1&&e.change(!0)}))},o=0;o<r;o++)a(o);else this.toast("服务器接口地址不能为空！")}}};e.default=c}).call(this,n("543d")["default"])},b008:function(t,e,n){"use strict";n.r(e);var i=n("cd5a"),r=n("673f");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("684b");var o,s=n("f0c5"),u=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"3c1af85a",null,!1,i["a"],o);e["default"]=u.exports},cd5a:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={tuiIcon:function(){return Promise.all([n.e("common/vendor"),n.e("components/thorui/tui-icon/tui-icon")]).then(n.bind(null,"acf0"))}},r=function(){var t=this,e=t.$createElement;t._self._c},a=[]},fe19:function(t,e,n){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/thorui/tui-upload/tui-upload-create-component',
    {
        'components/thorui/tui-upload/tui-upload-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("b008"))
        })
    },
    [['components/thorui/tui-upload/tui-upload-create-component']]
]);
