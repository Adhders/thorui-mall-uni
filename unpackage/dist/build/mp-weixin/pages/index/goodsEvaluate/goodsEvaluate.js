(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/goodsEvaluate/goodsEvaluate"],{"160d":function(t,e,i){"use strict";i.r(e);var n=i("a3c8"),r=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=r.a},"3f50":function(t,e,i){},"6a4a":function(t,e,i){"use strict";var n=i("3f50"),r=i.n(n);r.a},"84ce":function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={tuiRate:function(){return i.e("components/thorui/tui-rate/tui-rate").then(i.bind(null,"0193"))},tuiIcon:function(){return Promise.all([i.e("common/vendor"),i.e("components/thorui/tui-icon/tui-icon")]).then(i.bind(null,"acf0"))},tuiDivider:function(){return i.e("components/thorui/tui-divider/tui-divider").then(i.bind(null,"5664"))}},r=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.displayList,(function(e,i){var n=t.__get_orig(e),r=t._f("timeFormat")(e.create_time),s=e.additional?t._f("intervalTime")(e.additional.date):null,a=t.reviewLikes.includes(e.id),u=t.reviewLikes.includes(e.id);return{$orig:n,f0:r,f1:s,g0:a,g1:u}})));t._isMounted||(t.e0=function(e){t.select="all"},t.e1=function(e){t.select="image"},t.e2=function(e){t.select="good"},t.e3=function(e){t.select="additional"},t.e4=function(e){t.select="negative"}),t.$mp.data=Object.assign({},{$root:{l0:i}})},s=[]},a3c8:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i("0d3e"));function r(t){return t&&t.__esModule?t:{default:t}}var s={data:function(){return{active:1,select:"all",selectedType:{image:0,good:0,additional:0,negative:0},webURL:"https://review.chuangbiying.com/",displayList:[],goodRate:"100"}},filters:{timeFormat:function(t){return n.default.formatDate("y-m-d",t)},intervalTime:function(t){var e=new Date,i=new Date(t),n=(e-i)/1e3,r=parseInt(n/86400),s=parseInt(n/3600),a=parseInt(n/60);return r?r+"天":s?s+"小时":a?a+"分钟":"1分钟"}},onLoad:function(){this.selectedType.image=this.reviewList.filter((function(t){return t.imgs.length>0})).length,this.selectedType.good=this.reviewList.filter((function(t){return t.star>=4})).length,this.selectedType.additional=this.reviewList.filter((function(t){return t.additional})).length,this.selectedType.negative=this.reviewList.filter((function(t){return t.star<=2})).length,this.displayList=this.reviewList;var t=0;this.reviewList.forEach((function(e){e.star>=4&&(t+=1)}));var e=this.reviewList.length;this.goodRate=0===e?100:parseInt(t/e*100)},watch:{select:function(t){switch(t){case"all":this.displayList=this.reviewList.sort((function(t,e){return e.star-t.star}));break;case"good":var e=this.reviewList.filter((function(t){return t.star>=4}));this.displayList=e.sort((function(t,e){return e.star-t.star}));break;case"image":var i=this.reviewList.filter((function(t){return t.imgs.length>0}));this.displayList=i.sort((function(t,e){return e.star-t.star}));break;case"negative":var n=this.reviewList.filter((function(t){return t.star<=2}));this.displayList=n.sort((function(t,e){return t.star-e.star}));break;case"additional":var r=this.reviewList.filter((function(t){return t.additional}));this.displayList=r.sort((function(t,e){return e.star-t.star}));break}}},computed:{reviewList:function(){return this.$store.state.reviewList.sort((function(t,e){return e.star-t.star}))},reviewLikes:function(){return this.$store.state.reviewLikes}},methods:{onChange:function(t){this.active=t,this.displayList=1===t?this.reviewList.sort((function(t,e){return e.star-t.star})):this.reviewList.sort((function(t,e){return new Date(e.create_time).getTime()-new Date(t.create_time).getTime()}))},onLike:function(e){if(this.tui.isLogin()){var i=this.reviewLikes.indexOf(e),n=this.reviewList.findIndex((function(t){return t.id===e})),r=this.reviewList[n].likes;-1!==i?(r-=1,this.reviewLikes.splice(i,1)):(r+=1,this.reviewLikes.push(e)),this.reviewList[n].likes=r;var s="/updateGoodsReview/"+e+"/likes";this.tui.request(s,"PUT",{likes:r}).then((function(t){}));var a="/updateCustomer/"+t.getStorageSync("pid")+"/reviewLikes";this.tui.request(a,"PUT",{reviewLikes:e}).then((function(t){}))}else t.navigateTo({url:"/pages/my/login/login"})},previewImage:function(e,i,n){var r=this,s=[];s=n?this.reviewList[e].additional.imgs:this.reviewList[e].imgs;var a=s.map((function(t){return r.webURL+t}));t.previewImage({current:i,urls:a})},evaluateDetail:function(t){this.$store.commit("updateCurrentReview",t),this.tui.href("/pages/index/evaluateDetail/evaluateDetail")}}};e.default=s}).call(this,i("543d")["default"])},cd62:function(t,e,i){"use strict";(function(t){i("c514");n(i("66fd"));var e=n(i("f807"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},f807:function(t,e,i){"use strict";i.r(e);var n=i("84ce"),r=i("160d");for(var s in r)"default"!==s&&function(t){i.d(e,t,(function(){return r[t]}))}(s);i("6a4a");var a,u=i("f0c5"),o=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=o.exports}},[["cd62","common/runtime","common/vendor"]]]);