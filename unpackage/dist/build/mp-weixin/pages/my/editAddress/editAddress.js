(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/editAddress/editAddress"],{"059e":function(e,t,i){"use strict";(function(e){i("c514");s(i("66fd"));var t=s(i("6e0c"));function s(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=i,e(t.default)}).call(this,i("543d")["createPage"])},3211:function(e,t,i){"use strict";var s=i("98e0"),r=i.n(s);r.a},"33e6":function(e,t,i){"use strict";i.r(t);var s=i("feae"),r=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);t["default"]=r.a},"6e0c":function(e,t,i){"use strict";i.r(t);var s=i("6e0f"),r=i("33e6");for(var n in r)"default"!==n&&function(e){i.d(t,e,(function(){return r[e]}))}(n);i("3211");var o,u=i("f0c5"),l=Object(u["a"])(r["default"],s["b"],s["c"],!1,null,"13880cb6",null,!1,s["a"],o);t["default"]=l.exports},"6e0f":function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return s}));var s={tuiListCell:function(){return i.e("components/thorui/tui-list-cell/tui-list-cell").then(i.bind(null,"057e"))},tuiIcon:function(){return Promise.all([i.e("common/vendor"),i.e("components/thorui/tui-icon/tui-icon")]).then(i.bind(null,"acf0"))},tuiSwitch:function(){return i.e("components/thorui/tui-switch/tui-switch").then(i.bind(null,"48de"))},tuiButton:function(){return i.e("components/thorui/tui-button/tui-button").then(i.bind(null,"009d"))}},r=function(){var e=this,t=e.$createElement;e._self._c},n=[]},"98e0":function(e,t,i){},feae:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(i("fa5f")),r=n(i("0029"));function n(e){return e&&e.__esModule?e:{default:e}}var o={data:function(){return{lists:["公司","家","学校","其他"],selectList:r.default,multiArray:[],value:[0,0,0],ruleForm:{telNumber:"",userName:"",label:"",location:"",default:!1,detailInfo:"",postalCode:""}}},onLoad:function(t){t.address?(this.ruleForm=JSON.parse(t.address),this.selectedIndex=t.selectedIndex,e.setNavigationBarTitle({title:this.ruleForm.new?"添加地址":"修改地址"})):(this.ruleForm.new=!0,e.setNavigationBarTitle({title:"添加地址"})),this.multiArray=[this.toArr(this.selectList),this.toArr(this.selectList[0].children),this.toArr(this.selectList[0].children[0].children)]},computed:{addressList:function(){return this.$store.state.addressList}},methods:{onChange:function(e){console.log("change",e),this.ruleForm.default=e.detail.value},onSelect:function(e){this.$set(this.ruleForm,"label",e),this.$forceUpdate()},handleChoiceAddress:function(){var e=this;wx.getSetting({success:function(t){t.authSetting["scope.address"]?wx.chooseAddress({success:function(t){e.ruleForm=t,e.ruleForm.location=t.provinceName+" "+t.cityName+" "+t.countyName}}):0==t.authSetting["scope.address"]?wx.openSetting({success:function(e){console.log(e.authSetting)}}):wx.chooseAddress({success:function(t){e.ruleForm=t,e.ruleForm.location=t.provinceName+" "+t.cityName+" "+t.countyName}})}})},getAddress:function(){var t="/pages/common/location/location?ruleForm="+JSON.stringify(this.ruleForm),i=void 0!==this.selectedIndex?t+"&selectedIndex="+this.selectedIndex:t;e.redirectTo({url:i})},picker:function(e){var t=e.detail.value;if(this.selectList.length>0){var i=this.selectList[t[0]].text,s=this.selectList[t[0]].children[t[1]].text,r=this.selectList[t[0]].children[t[1]].children[t[2]].text;this.ruleForm.location=i+" "+s+" "+r}},toArr:function(e){var t=[];for(var i in e)t.push(e[i].text);return t},columnPicker:function(e){var t=e.detail.column,i=e.detail.value;0===t?(this.multiArray=[this.multiArray[0],this.toArr(this.selectList[i].children),this.toArr(this.selectList[i].children[0].children)],this.value=[i,0,0]):1===t&&(this.multiArray=[this.multiArray[0],this.multiArray[1],this.toArr(this.selectList[this.value[0]].children[i].children)],this.value=[this.value[0],i,0])},formSubmit:function(t){var i=this,r=[{name:"userName",rule:["required","minLength:2"],msg:["请输入姓名","姓名必须2个或以上字符"]},{name:"telNumber",rule:["required","isMobile"],msg:["请输入手机号","请输入正确的手机号"]},{name:"city",rule:["required","minLength:2"],msg:["请输入姓名","姓名必须2个或以上字符"]},{name:"detailInfo",rule:["required","minLength:2"],msg:["请输入姓名","姓名必须2个或以上字符"]},{name:"postalCode",rule:["minLength:6","maxLength:6"],msg:["请输入正确的邮编","请输入正确的邮编"]}],n=t.detail.value,o=s.default.validation(n,r);if(o)e.showToast({title:o,icon:"none"});else{if(delete this.ruleForm.new,this.ruleForm.default&&this.addressList.forEach((function(e){e.default=!1})),void 0!==this.selectedIndex)this.addressList[this.selectedIndex]=this.ruleForm;else if(this.addressList.push(this.ruleForm),1===this.addressList.length){var u=this.$store.state.userInfo;u.defaultAddress=this.ruleForm,this.$store.commit("setUserInfo",u),e.setStorage({key:"userInfo",data:u});var l=getCurrentPages(),a=l[l.length-2];"submitOrder"===a.route.split("/").pop()&&(a.$vm.orderForm.address=this.ruleForm)}var c=e.getStorageSync("pid"),d="/updateCustomer/"+c+"/addressList";this.tui.request(d,"PUT",{addressList:this.addressList}).then((function(t){"0"===t.code&&(i.$store.commit("setAddress",i.addressList),e.navigateBack({delta:1}))}))}}}};t.default=o}).call(this,i("543d")["default"])}},[["059e","common/runtime","common/vendor"]]]);